//
//  WallabagKitCollectionTests.swift
//  wallabagTests
//

import XCTest
@testable import wallabag

class WallabagKitCollectionTests: XCTestCase {
    func testDecodeEmptyCollectionOfWallabagEntry() {
        let json = loadJSON(filename: "EmptyCollection")

        do {
            let decode = try JSONDecoder().decode(WallabagKitCollection<WallabagKitEntry>.self, from: json)
            XCTAssertEqual(30, decode.limit)
            XCTAssertEqual(1, decode.page)
            XCTAssertEqual(1, decode.pages)
            XCTAssertEqual(0, decode.total)
            XCTAssertEqual(0, decode.items.count)
        } catch _ {
            XCTFail()
        }
    }

    func testDecodeEntriesCollectionOfWallabagEntry() {
        let json = loadJSON(filename: "EntriesCollection")

        do {
            let decode = try JSONDecoder().decode(WallabagKitCollection<WallabagKitEntry>.self, from: json)
            XCTAssertEqual(30, decode.limit)
            XCTAssertEqual(1, decode.page)
            XCTAssertEqual(1, decode.pages)
            XCTAssertEqual(1, decode.total)
            XCTAssertEqual(1, decode.items.count)
        } catch _ {
            XCTFail()
        }
    }
}
